<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>/:@/: Improved</title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="sscan.htm">&gt;&gt;</a>&nbsp;
<a href="dist.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">/:@/: </font>
<font size=+3>Improved</font>
</td><td align=right>
initial writing: 2004-05-19<br>last updated: 2004-10-26
</td></tr></table>
<br>

<p>The monads<tt> /:@/: </tt>(which computes <i>ranking</i>) 
and<tt> /:@/:&quot;r </tt>are now
implemented by special code.  The following benchmarks illustrate
the improvements in time and space:</p>

<pre>
ts=: 6!:2 , 7!:2@]  NB. time and space
ts '/:@/:x'
</pre>
<table>
<tr><td><tt><b> &nbsp; &nbsp; x</b></tt></td> <td>&nbsp;&nbsp;</td> <td align=center><b>J 5.04</b></td> <td>&nbsp;&nbsp;&nbsp;</td> <td align=center><b>J 5.03</b></td> <td>&nbsp;&nbsp;</td> <td align=center><b>Ratio</b></td></tr> 
<tr><td><tt>1e6 1 ?@$ 2</tt></td>      <td>&nbsp;</td><td>0.036380 &nbsp; 4.195072e6</td><td>&nbsp;</td><td>0.258304 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 7.10 &nbsp; 3.00</td></tr>
<tr><td><tt>1e6 2 ?@$ 2</tt></td>      <td>&nbsp;</td><td>0.076345 &nbsp; 4.195072e6</td><td>&nbsp;</td><td>0.401466 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 5.26 &nbsp; 3.00</td></tr>
<tr><td><tt>1e6 3 ?@$ 2</tt></td>      <td>&nbsp;</td><td>0.226128 &nbsp; 8.389376e6</td><td>&nbsp;</td><td>0.520508 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 2.30 &nbsp; 1.50</td></tr>
<tr><td><tt>1e6 4 ?@$ 2</tt></td>      <td>&nbsp;</td><td>0.134970 &nbsp; 4.195072e6</td><td>&nbsp;</td><td>0.600956 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 4.45 &nbsp; 3.00</td></tr>
<tr><td><tt>1e6 5 ?@$ 2</tt></td>      <td>&nbsp;</td><td>0.508242 &nbsp; 8.389376e6</td><td>&nbsp;</td><td>0.857384 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 1.69 &nbsp; 1.50</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td><tt>a.{~1e6 1 ?@$ #a.</tt></td><td>&nbsp;</td><td>0.042595 &nbsp; 4.197120e6</td><td>&nbsp;</td><td>0.567743 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right>13.33 &nbsp; 3.00</td></tr>
<tr><td><tt>a.{~1e6 2 ?@$ #a.</tt></td><td>&nbsp;</td><td>0.119103 &nbsp; 4.719360e6</td><td>&nbsp;</td><td>0.814606 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 6.84 &nbsp; 2.67</td></tr>
<tr><td><tt>a.{~1e6 3 ?@$ #a.</tt></td><td>&nbsp;</td><td>0.698069 &nbsp; 8.389376e6</td><td>&nbsp;</td><td>1.099157 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 1.57 &nbsp; 1.50</td></tr>
<tr><td><tt>a.{~1e6 4 ?@$ #a.</tt></td><td>&nbsp;</td><td>1.019201 &nbsp; 8.389376e6</td><td>&nbsp;</td><td>1.388238 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 1.36 &nbsp; 1.50</td></tr>
<tr><td><tt>a.{~1e6 5 ?@$ #a.</tt></td><td>&nbsp;</td><td>1.257346 &nbsp; 8.389376e6</td><td>&nbsp;</td><td>1.678288 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 1.33 &nbsp; 1.50</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td><tt>1e6 ?@$ 1e2</tt></td>      <td>&nbsp;</td><td>0.101135 &nbsp; 4.195584e6</td><td>&nbsp;</td><td>0.624041 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 6.17 &nbsp; 3.00</td></tr>
<tr><td><tt>1e6 ?@$ 1e4</tt></td>      <td>&nbsp;</td><td>0.116228 &nbsp; 4.260608e6</td><td>&nbsp;</td><td>0.714883 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 6.15 &nbsp; 2.95</td></tr>
<tr><td><tt>1e6 ?@$ 1e6</tt></td>      <td>&nbsp;</td><td>0.461045 &nbsp; 8.389376e6</td><td>&nbsp;</td><td>1.146183 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 2.49 &nbsp; 1.50</td></tr>
<tr><td><tt>1e6 ?@$ 1e8</tt></td>      <td>&nbsp;</td><td>0.806820 &nbsp; 8.913664e6</td><td>&nbsp;</td><td>1.194081 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 1.48 &nbsp; 1.41</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td><tt>1e6 ?@$ 0</tt></td>        <td>&nbsp;</td><td>1.840385 &nbsp; 8.913664e6</td><td>&nbsp;</td><td>2.239712 &nbsp; 1.258368e7</td><td>&nbsp;</td><td align=right> 1.22 &nbsp; 1.41</td></tr>
</table>

<br>
<!--bottom jump start--><hr><a href="sscan.htm">&gt;&gt;</a>&nbsp;
<a href="dist.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
