<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>{ Improved</title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="fromsp.htm">&gt;&gt;</a>&nbsp;
<a href="infix2.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">{ </font>
<font size=+3>Improved</font></b></td>
<td align=right>
initial writing: 2000-10-20<br>last updated: 2004-10-26
</td></tr></table>
<br>

The case<tt> (&lt;i;j;k; ...){y </tt>where leading indices are 
singleton integer arrays, is now implemented by special code.  
Some benchmarks:<br>

<pre>
   ts=: 6!:2 , 7!:2@]  NB. time and space

   a=: ?. 2 3 4 1e5$1e9   [ i=: &lt;(?.&amp;.&gt;2 3 4),&lt;?.4 5$1e5
   b=: o.?.40 2 15000$1e6 [ j=: &lt;20;0;_4
   c=: ?. s$1e9           [ k=: &lt;?.&amp;.&gt;$s=:13 11 7 5 3 2
</pre>

<table>
<tr><td><b>Expr. &nbsp; &nbsp;</b></td>
<td align=center colspan=2><b>J 4.06 &nbsp; &nbsp; &nbsp;</b></td> 
<td align=center colspan=2><b>J 4.05 &nbsp; &nbsp; &nbsp;</b></td>
</tr>

<tr>
<td><tt>i{a</tt></td>
<td><tt>2.54222e_5 &nbsp;</tt></td>
<td><tt>1408 &nbsp; &nbsp;</tt></td>     
<td><tt>1.12953e_2</tt></td>
<td><tt>2098560</tt></td>
</tr>

<tr>
<td><tt>j{b</tt></td>
<td><tt>2.29079e_5</tt></td>
<td><tt>1088</tt></td>     
<td><tt>7.09867e_4 &nbsp;</tt></td>
<td><tt>132352</tt></td>
</tr>

<tr>
<td><tt>k{c</tt></td>
<td><tt>1.88292e_4</tt></td>
<td><tt>17216</tt></td>     
<td><tt>6.64889e_5</tt></td>
<td><tt>17408</tt></td>
</tr>
</table>
<br>

Also, the dyad<tt> { </tt>for Boolean left arguments is
now implemented by special code.  Some benchmarks:<br>

<pre>
   b=: ?.1e6$2
   x=: (2,c)$'abcdefghijqrstuvwxyz'
   ts 'b{x'
</pre>
<table>
<tr><td valign=bottom><b>c</b></td> <td align=center valign=bottom><b>J 4.06</b></td> <td align=center valign=bottom><b>J 4.05</b></td> <td><b>Time<br>Ratio</b></td></tr>
<tr><td><tt>1 </tt></td>       <td><tt>0.0217949  1.049280e6</tt></td>       <td><tt>0.1060300  9.438080e6</tt></td>       <td><tt>4.86</tt></td></tr>
<tr><td><tt>2 </tt></td>       <td><tt>0.0227065  2.097856e6</tt></td>       <td><tt>0.1074530  1.048666e7</tt></td>       <td><tt>4.73</tt></td></tr>
<tr><td><tt>3 </tt></td>       <td><tt>0.0390362  4.195008e6</tt></td>       <td><tt>0.1726359  1.258381e7</tt></td>       <td><tt>4.42</tt></td></tr>
<tr><td><tt>4 </tt></td>       <td><tt>0.0283271  4.195008e6</tt></td>       <td><tt>0.1164168  1.258381e7</tt></td>       <td><tt>4.11</tt></td></tr>
<tr><td><tt>5 </tt></td>       <td><tt>0.0456212  8.389824e6</tt></td>       <td><tt>0.1772309  1.677811e7</tt></td>       <td><tt>3.88</tt></td></tr>
<tr><td><tt>6 </tt></td>       <td><tt>0.0446817  8.389824e6</tt></td>       <td><tt>0.1964577  1.677811e7</tt></td>       <td><tt>4.40</tt></td></tr>
<tr><td><tt>7 </tt></td>       <td><tt>0.0478795  8.389824e6</tt></td>       <td><tt>0.2010920  1.677811e7</tt></td>       <td><tt>4.20</tt></td></tr>
<tr><td><tt>8 </tt></td>       <td><tt>0.0426456  8.389312e6</tt></td>       <td><tt>0.1538154  1.677811e7</tt></td>       <td><tt>3.61</tt></td></tr>
<tr><td><tt>9 </tt></td>       <td><tt>0.0574534  1.677794e7</tt></td>       <td><tt>0.2152081  2.516672e7</tt></td>       <td><tt>3.75</tt></td></tr>
<tr><td><tt>10</tt></td>       <td><tt>0.0579359  1.677794e7</tt></td>       <td><tt>0.2198388  2.516672e7</tt></td>       <td><tt>3.79</tt></td></tr>
<tr><td><tt>11</tt></td>       <td><tt>0.0729431  1.677794e7</tt></td>       <td><tt>0.2220768  2.516672e7</tt></td>       <td><tt>3.04</tt></td></tr>
<tr><td><tt>12</tt></td>       <td><tt>0.0833206  1.677794e7</tt></td>       <td><tt>0.2088402  2.516672e7</tt></td>       <td><tt>2.51</tt></td></tr>
<tr><td><tt>30 &nbsp;</tt></td><td><tt>0.1592722  3.355718e7 &nbsp;</tt></td><td><tt>0.2551766  4.194394e7 &nbsp;</tt></td><td><tt>1.60</tt></td></tr>
</table>

<br><br>
<!--bottom jump start--><hr><a href="fromsp.htm">&gt;&gt;</a>&nbsp;
<a href="infix2.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
