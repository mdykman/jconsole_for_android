<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>c}x,y,:z Improved</title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="rank.htm">&gt;&gt;</a>&nbsp;
<a href="grade.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">c}x,y,:z </font>
<font size=+3>Improved</font></b>
</td><td align=right>
initial writing: 2000-00-00<br>
last updated: 2004-10-26
</td></tr></table>
<br>

The phrase<tt> b}x,:y </tt>for numeric<tt> x </tt>
and<tt> y </tt>is equivalent to the well-known
phrase<tt> (x*b)+y*-.b</tt> .<tt> </tt>
Recently, special code has been implemented
for the phrase<tt> name=: c}x,y,...,:z</tt> ,<tt> </tt>
with boolean<tt> c </tt>as a special case,
and the amendment is done in place 
if<tt> name </tt>is<tt> x </tt>or<tt> y </tt>and<tt> c </tt>is boolean.
(In-place amendment is eschewed for
integral<tt> c </tt>due to the possibility of index error.)<br><br>

A time-space comparison is as follows:
<pre>   b=: ?(5$10)$2
   x=: o.?($b)$1000
   y=: o.?($b)$1000
   z=: o.?($b)$1000
      
   c=: ?($b)$3
      
   ts=: 6!:2 , 7!:2@]
         
   +/,b                 NB. roughly equal proportions of 1s and 0s
50185
   ts 'q=: (x*b)+y*-.b'
0.0279061 3.27834e6
   ts 'r=: (b)}y,:x'    NB. no special code
0.0570458 6.29325e6
   ts 's=: b}y,:x'      NB. special code but makes copy
0.0102885 1.05018e6
   ts 'y=: b}y,:x'      NB. special code, in place
0.00728388 1472
   q&amp;-:&amp;&gt; r;s;y
1 1 1
   
   b1=: 0=?(5$10)$390
   y=: o.?($b)$1000
      
   +/,b1                NB. many more 0s than 1s
243
   ts 'q=: (x*b1)+y*-.b1'
0.0281466 3.27821e6
   ts 'r=: (b1)}y,:x'   NB. no special code
0.0535643 6.29325e6
   ts 's=: b1}y,:x'     NB. special code but makes copy
0.00813539 1.05018e6
   ts 'y=: b1}y,:x'     NB. special code, in place
0.0012672 1600
   q&amp;-:&amp;&gt; r;s;y
1 1 1

   y=: o.?($b)$1000

   ts 'q=: (x*0=c)+(y*1=c)+z*2=c'
0.0600914 5.63834e6
   ts 'r=: (c)}x,y,:z'  NB. no special code
0.0848446 9.96352e6
   ts 's=: c}x,y,:z'    NB. special code but makes copy
0.0119311 1.0505e6
   q&amp;-:&amp;&gt; r;s
1 1
</pre>

<br>
<!--bottom jump start--><hr><a href="rank.htm">&gt;&gt;</a>&nbsp;
<a href="grade.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
