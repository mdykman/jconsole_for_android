<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>u/&quot;r Improved <a </title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="key503.htm">&gt;&gt;</a>&nbsp;
<a href="fsm.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">u/&quot;r </font><font size=+3>Improved</font>
</td><td align=right>
initial writing: 2003-09-04<br>last updated: 2004-10-26
</td></tr></table>
<br>

<p><tt>u/&quot;r y </tt>where<tt> r&gt;0 </tt>and<tt> 2=(-r){$y </tt> 
(insert over an axis of length 2)
is now faster for the following combinations:</p>

<table>
<tr><td>&nbsp;</td><td align=center><b>Verb <tt>u</tt></b></td> <td>&nbsp;</td>
    <td><b>Rank <tt>r</tt></td>                                 <td>&nbsp;</td>
    <td><b>Argument Type</b></td></tr>
<tr><td>&nbsp;</td><td><tt>=  ~:</tt></td>                      <td>&nbsp;</td>
    <td>any</td>                                                <td>&nbsp;</td>
    <td>literal</td></tr>
<tr><td>&nbsp;</td><td><tt>=  ~: &lt; &lt;: &gt; &gt;:</tt></td><td>&nbsp;</td>
    <td>any</td>                                                <td>&nbsp;</td>
    <td>integer, floating point</td></tr>
<tr><td>&nbsp;</td><td><tt>=  ~: &lt; &lt;: &gt; &gt;:<br>&lt;. &gt;. +. +: * *. *: </tt></td><td>&nbsp;</td>
    <td>1</td>                                                  <td>&nbsp;</td>
    <td>Boolean</td></tr>
</table></p>

<p>The following benchmarks demonstrate the improvement:</p> 

<pre>
i1=: ?1e6 2$1e6
i3=: ?1000 2 10 100$1e6
d1=: o. i1
d3=: o. i3
c1=: a.{~?1e6 2$256
c3=: a.{~?1000 2 10 100$256
b1=: ?10 1e5 2$2

ts=: 6!:2 , 7!:2@]
ts 'Expression'
</pre>

<table>
<tr><td align=center><b>Expression</b></td>  <td><tt>&nbsp;&nbsp;</tt></td>
<td align=center><b>J 5.03</b></td><td><tt>&nbsp;&nbsp;</tt></td>
<td align=center><b>J 5.02</b></td><td><tt>&nbsp;&nbsp;</tt></td>
<td align=center><b>Ratio</b></td>
</tr>

<tr><td><tt>&lt;/&quot;1 i1</tt></td><td>&nbsp;</td>
<td>0.035357  1.049856e6</td><td>&nbsp;</td><td>3.409647  1.050240e6</td><td>&nbsp;</td><td align=right>96.43 1.00</td></tr>
<tr><td><tt>&lt;/&quot;1 d1</tt></td><td>&nbsp;</td>
<td>0.150371  1.049856e6</td><td>&nbsp;</td><td>3.591794  1.050240e6</td><td>&nbsp;</td><td align=right>23.89 1.00</td></tr>
<tr><td><tt>&lt;/&quot;3 i3</tt></td><td>&nbsp;</td>
<td>0.040242  1.049792e6</td><td>&nbsp;</td><td>0.071851  1.070336e6</td><td>&nbsp;</td><td align=right> 1.79 1.02</td></tr>
<tr><td><tt>&lt;/&quot;3 d3</tt></td><td>&nbsp;</td>
<td>0.138132  1.049792e6</td><td>&nbsp;</td><td>0.188177  1.086720e6</td><td>&nbsp;</td><td align=right> 1.36 1.04</td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>=/&quot;1 i1</tt></td><td>&nbsp;</td>
<td>0.035739  1.049856e6</td><td>&nbsp;</td><td>3.493348  1.050240e6</td><td>&nbsp;</td><td align=right>97.75 1.00</td></tr>
<tr><td><tt>=/&quot;1 d1</tt></td><td>&nbsp;</td>
<td>0.172347  1.049856e6</td><td>&nbsp;</td><td>3.612539  1.050240e6</td><td>&nbsp;</td><td align=right>20.96 1.00</td></tr>
<tr><td><tt>=/&quot;3 i3</tt></td><td>&nbsp;</td>
<td>0.040809  1.049792e6</td><td>&nbsp;</td><td>0.060829  1.070336e6</td><td>&nbsp;</td><td align=right> 1.49 1.02</td></tr>
<tr><td><tt>=/&quot;3 d3</tt></td><td>&nbsp;</td>
<td>0.147929  1.049792e6</td><td>&nbsp;</td><td>0.195685  1.086720e6</td><td>&nbsp;</td><td align=right> 1.32 1.04</td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>=/&quot;1 c1</tt></td><td>&nbsp;</td>
<td>0.018211  1.049856e6</td><td>&nbsp;</td><td>3.401312  1.050240e6</td><td>&nbsp;</td><td align=right>186.77 1.00</td></tr>
<tr><td><tt>=/&quot;3 c3</tt></td><td>&nbsp;</td>
<td>0.020371  1.049792e6</td><td>&nbsp;</td><td>0.029415  1.062144e6</td><td>&nbsp;</td><td align=right>  1.44 1.01</td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>= /&quot;1 b1</tt></td><td>&nbsp;</td>
<td>0.014215  1.049856e6</td><td>&nbsp;</td><td>0.050325  1.049856e6</td><td>&nbsp;</td><td align=right>3.54 1.00</td></tr>
<tr><td><tt>~:/&quot;1 b1</tt></td><td>&nbsp;</td>
<td>0.014147  1.049856e6</td><td>&nbsp;</td><td>0.038562  1.049856e6</td><td>&nbsp;</td><td align=right>2.73 1.00</td></tr>
<tr><td><tt>&lt; /&quot;1 b1</tt></td><td>&nbsp;</td>
<td>0.014595  1.049856e6</td><td>&nbsp;</td><td>0.054640  1.049856e6</td><td>&nbsp;</td><td align=right>3.74 1.00</td></tr>
<tr><td><tt>+./&quot;1 b1</tt></td><td>&nbsp;</td>
<td>0.014129  1.049856e6</td><td>&nbsp;</td><td>0.062113  1.049856e6</td><td>&nbsp;</td><td align=right>4.40 1.00</td></tr>

</table>

<br>
<!--bottom jump start--><hr><a href="key503.htm">&gt;&gt;</a>&nbsp;
<a href="fsm.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
