<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>+ on Sparse Arguments Improved</title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="gcdrat.htm">&gt;&gt;</a>&nbsp;
<a href="circle.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">+ </font>
<font size=+3>on Sparse Arguments Improved</font></b>
</td><td align=right>
initial writing: 2001-08-02<br>last updated: 2004-10-26
</td></tr></table>
<br>

The dyad<tt> + </tt>(and other atomic functions such as<tt> - *</tt> ) 
on sparse arguments are now more efficient in time and space.  For example:<br>

<pre>
   s=: 13 17 19
   x=: ?.1600$1e6
   i=: ?.(1600,#s)$s
   
   p=: (800{.x) (&lt;&quot;1 ]800{.i)}1$.s
   q=: (800}.x) (&lt;&quot;1 ]800}.i)}1$.s

   ts=: 6!:2 , 7!:2@]   NB. time and space
   ts 'p+q'
</pre>

<table>
<tr>
<td><b>Expression &nbsp;&nbsp;&nbsp;</b></td>
<td align=center colspan=3><b>J 5.01</b></td><td>&nbsp;&nbsp;&nbsp;</td>
<td align=center colspan=3><b>J 4.06</b></td><td>&nbsp;&nbsp;&nbsp;</td>
<td align=center colspan=3><b>Ratio</b></td></tr>

<tr>
<td><tt>p + q</tt></td>
<td>0.000450895</td><td>&nbsp;</td><td align=right> 33792</td><td></td>
<td>0.001660546</td><td>&nbsp;</td><td align=right>153856</td><td></td> 
<td align=right>3.68</td><td>&nbsp;</td><td align=right> 4.55</td></tr>

<tr>
<td><tt>p - q</tt></td>
<td>0.000447822</td><td>&nbsp;</td><td align=right> 33792</td><td></td>
<td>0.001658311</td><td>&nbsp;</td><td align=right>153856</td><td></td>
<td align=right>3.70</td><td>&nbsp;</td><td align=right> 4.55</td></tr>

<tr>
<td><tt>p * q</tt></td>
<td>0.000249473</td><td>&nbsp;</td><td align=right>  5248</td><td></td>
<td>0.000749537</td><td>&nbsp;</td><td align=right> 52608</td><td></td>
<td align=right>3.00</td><td>&nbsp;</td><td align=right>10.02</td></tr>

<tr>
<td><tt>p % q</tt></td>
<td>0.000645613</td><td>&nbsp;</td><td align=right> 33792</td><td></td>
<td>0.001753016</td><td>&nbsp;</td><td align=right>153856</td><td></td>
<td align=right>2.72</td><td>&nbsp;</td><td align=right> 4.55</td></tr>

<tr>
<td><tt>p = q</tt></td>
<td>0.000742552</td><td>&nbsp;</td><td align=right> 19456</td><td></td>
<td>0.001741841</td><td>&nbsp;</td><td align=right>127232</td><td></td>
<td align=right>2.35</td><td>&nbsp;</td><td align=right> 6.54</td></tr>

<tr>
<td><tt>p ~:q</tt></td>
<td>0.000748978</td><td>&nbsp;</td><td align=right> 19456</td><td></td>
<td>0.001632051</td><td>&nbsp;</td><td align=right>127232</td><td></td> 
<td align=right>2.18</td><td>&nbsp;</td><td align=right> 6.54</td></tr>

<tr>
<td><tt>p &lt; q</tt></td>
<td>0.000670756</td><td>&nbsp;</td><td align=right> 19456</td><td></td>
<td>0.001730108</td><td>&nbsp;</td><td align=right>136448</td><td></td>
<td align=right>2.58</td><td>&nbsp;</td><td align=right> 7.01</td></tr>

</table>
<br><br>

<!--bottom jump start--><hr><a href="gcdrat.htm">&gt;&gt;</a>&nbsp;
<a href="circle.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
