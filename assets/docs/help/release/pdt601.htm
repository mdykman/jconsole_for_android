<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>+/ .* Improved</title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="inv601.htm">&gt;&gt;</a>&nbsp;
<a href="powop.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">+/ .* </font>
<font size=+3>Improved</font></b></td>
<td align=right>
initial writing: 2006-03-28<br>last updated: 2006-03-31
</td></tr></table>
<br>

<p>The dyad<tt> x +/ .* y </tt>has been made more efficient
in the following circumstances:</p>

<ul>
<li><tt>x </tt>is Boolean, or
<li><tt>y </tt>is Boolean, or</li>
<li><tt>*./1=}.$y </tt>,<tt> </tt>in particular if<tt> y </tt>is a vector</li>
</ul>

<p>(There is no change if both<tt> x </tt>and<tt> y </tt>are Boolean.)
The amount of improvement depends on the size of the arguments
and on the number of 1s in a Boolean argument.
The following benchmarks demonstrate the improvement:</p>

<pre>
ts=: 6!:2 , 7!:2@]  NB. time and space
ts 'x +/ .* y'
</pre>

<table>
<tr>
<td><b> &nbsp; &nbsp; &nbsp; x</b></td><td>&nbsp; &nbsp;</td>
<td><b> &nbsp; &nbsp; &nbsp; y</b></td><td><tt>&nbsp; &nbsp;</tt></td>
<td align=center colspan=3><b>J 6.01</b></td><td><tt>&nbsp; &nbsp;</tt></td>
<td align=center colspan=3><b>J 5.04</b></td><td><tt>&nbsp; &nbsp;</tt></td>
<td align=center colspan=3><b>Ratio</b></td>
</tr>
<tr><td><tt>2e4 ?@$ 2         </tt></td><td>&nbsp;</td><td><tt>2e4 100 ?@$ 0  </tt></td><td>&nbsp;</td><td>0.00407861</td><td>&nbsp;</td><td align=right> 2112</td><td>&nbsp;</td><td>0.00656611</td><td>&nbsp;</td><td align=right>  264384</td><td>&nbsp;</td><td align=right>1.61</td><td>&nbsp;</td><td align=right>125.18</td></tr>
<tr><td><tt>5 2e4 ?@$ 2       </tt></td><td>&nbsp;</td><td><tt>2e4 100 ?@$ 0  </tt></td><td>&nbsp;</td><td>0.02057971</td><td>&nbsp;</td><td align=right> 5184</td><td>&nbsp;</td><td>0.03784747</td><td>&nbsp;</td><td align=right> 1053888</td><td>&nbsp;</td><td align=right>1.84</td><td>&nbsp;</td><td align=right>203.30</td></tr>
<tr><td><tt>0=2e4 ?@$ 10      </tt></td><td>&nbsp;</td><td><tt>2e4 100 ?@$ 0  </tt></td><td>&nbsp;</td><td>0.00102496</td><td>&nbsp;</td><td align=right> 2112</td><td>&nbsp;</td><td>0.00197282</td><td>&nbsp;</td><td align=right>  264384</td><td>&nbsp;</td><td align=right>1.92</td><td>&nbsp;</td><td align=right>125.18</td></tr>
<tr><td><tt>0=5 2e4 ?@$ 10    </tt></td><td>&nbsp;</td><td><tt>2e4 100 ?@$ 0  </tt></td><td>&nbsp;</td><td>0.00518482</td><td>&nbsp;</td><td align=right> 5184</td><td>&nbsp;</td><td>0.01039583</td><td>&nbsp;</td><td align=right> 1053888</td><td>&nbsp;</td><td align=right>2.01</td><td>&nbsp;</td><td align=right>203.30</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td><tt>100 2e4 ?@$ 0     </tt></td><td>&nbsp;</td><td><tt>2e4  ?@$ 2     </tt></td><td>&nbsp;</td><td>0.01304037</td><td>&nbsp;</td><td align=right> 2112</td><td>&nbsp;</td><td>0.04706877</td><td>&nbsp;</td><td align=right>  264384</td><td>&nbsp;</td><td align=right>3.61</td><td>&nbsp;</td><td align=right>125.18</td></tr>
<tr><td><tt>100 2e4 ?@$ 0     </tt></td><td>&nbsp;</td><td><tt>2e4 5?@$ 2     </tt></td><td>&nbsp;</td><td>0.08213707</td><td>&nbsp;</td><td align=right> 5184</td><td>&nbsp;</td><td>0.15116245</td><td>&nbsp;</td><td align=right> 1053888</td><td>&nbsp;</td><td align=right>1.84</td><td>&nbsp;</td><td align=right>203.30</td></tr>
<tr><td><tt>100 2e4 ?@$ 0     </tt></td><td>&nbsp;</td><td><tt>0=2e4  ?@$ 10  </tt></td><td>&nbsp;</td><td>0.00993831</td><td>&nbsp;</td><td align=right> 2112</td><td>&nbsp;</td><td>0.03910959</td><td>&nbsp;</td><td align=right>  264384</td><td>&nbsp;</td><td align=right>3.94</td><td>&nbsp;</td><td align=right>125.18</td></tr>
<tr><td><tt>100 2e4 ?@$ 0     </tt></td><td>&nbsp;</td><td><tt>0=2e4 5?@$ 10  </tt></td><td>&nbsp;</td><td>0.04794872</td><td>&nbsp;</td><td align=right> 5184</td><td>&nbsp;</td><td>0.09891527</td><td>&nbsp;</td><td align=right> 1053888</td><td>&nbsp;</td><td align=right>2.06</td><td>&nbsp;</td><td align=right>203.30</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td><tt>100 2e4 ?@$ 0     </tt></td><td>&nbsp;</td><td><tt>2e4  ?@$ 0     </tt></td><td>&nbsp;</td><td>0.00667827</td><td>&nbsp;</td><td align=right> 2112</td><td>&nbsp;</td><td>0.03896374</td><td>&nbsp;</td><td align=right>    2240</td><td>&nbsp;</td><td align=right>5.83</td><td>&nbsp;</td><td align=right>  1.06</td></tr>
<tr><td><tt>j./2 100 2e4 ?@$ 0</tt></td><td>&nbsp;</td><td><tt>j./2 2e4  ?@$ 0</tt></td><td>&nbsp;</td><td>0.02276409</td><td>&nbsp;</td><td align=right> 3136</td><td>&nbsp;</td><td>0.04351965</td><td>&nbsp;</td><td align=right>    3264</td><td>&nbsp;</td><td align=right>1.91</td><td>&nbsp;</td><td align=right>  1.04</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td><tt>2e5 ?@$ 0         </tt></td><td>&nbsp;</td><td><tt>2e5  ?@$ 0     </tt></td><td>&nbsp;</td><td>0.00138537</td><td>&nbsp;</td><td align=right> 1152</td><td>&nbsp;</td><td> 0.00445404</td><td>&nbsp;</td><td align=right>   1280</td><td>&nbsp;</td><td align=right>3.22</td><td>&nbsp;</td><td align=right>  1.11</td></tr>
<tr><td><tt>2e6 ?@$ 0         </tt></td><td>&nbsp;</td><td><tt>2e6  ?@$ 0     </tt></td><td>&nbsp;</td><td>0.01210311</td><td>&nbsp;</td><td align=right> 1152</td><td>&nbsp;</td><td> 0.04429559</td><td>&nbsp;</td><td align=right>   1280</td><td>&nbsp;</td><td align=right>3.66</td><td>&nbsp;</td><td align=right>  1.11</td></tr>
<tr><td><tt>j./2 2e5 ?@$ 0    </tt></td><td>&nbsp;</td><td><tt>j./2 2e5  ?@$ 0</tt></td><td>&nbsp;</td><td>0.00293892</td><td>&nbsp;</td><td align=right> 1152</td><td>&nbsp;</td><td> 0.00473435</td><td>&nbsp;</td><td align=right>   1280</td><td>&nbsp;</td><td align=right>1.61</td><td>&nbsp;</td><td align=right>  1.11</td></tr>
<tr><td><tt>j./2 2e6 ?@$ 0    </tt></td><td>&nbsp;</td><td><tt>j./2 2e6  ?@$ 0</tt></td><td>&nbsp;</td><td>0.02595096</td><td>&nbsp;</td><td align=right> 1152</td><td>&nbsp;</td><td> 0.04706550</td><td>&nbsp;</td><td align=right>   1280</td><td>&nbsp;</td><td align=right>1.81</td><td>&nbsp;</td><td align=right>  1.11</td></tr>
</table>

<br>
<!--bottom jump start--><hr><a href="inv601.htm">&gt;&gt;</a>&nbsp;
<a href="powop.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
